module.exports=function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=37)}([function(e,n){e.exports=require("react")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/typeof")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/concat")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/for-each")},function(e,n){e.exports=require("@babel/runtime-corejs3/regenerator")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/map")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/keys")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/filter")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/objectWithoutProperties")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/defineProperty")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/asyncToGenerator")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/assertThisInitialized")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/classCallCheck")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/createClass")},function(e,n){e.exports=require("classnames")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/promise")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/slicedToArray")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/extends")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/reflect/construct")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/includes")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/reduce")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/map")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/set")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/values")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/getPrototypeOf")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/entries")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-names")},function(e,n,t){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var i=(a=r,l=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([i]).join("\n")}var a,l,s;return[t].join("\n")}(n,e);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);r&&i[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),n.push(s))}},n}},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/inherits")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/some")},function(e,n){e.exports=require("immer")},function(e,n,t){(n=t(30)(!1)).push([e.i,'.rh-form-field,\n.rh-form-list {\n  margin-bottom: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  min-height: 32px;\n  vertical-align: top;\n}\n.rh-form-field__header,\n.rh-form-list__header {\n  margin-right: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 14px;\n  text-align: right;\n  height: 32px;\n  width: 120px;\n}\n.rh-form-field__header::before,\n.rh-form-list__header::before {\n  display: none;\n  content: "*";\n  color: red;\n}\n.rh-form-field__container,\n.rh-form-list__container {\n  position: relative;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-top: auto;\n  margin-bottom: auto;\n}\n.rh-form-field__message,\n.rh-form-list__message {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  font-size: 12px;\n  color: red;\n}\n.rh-form-field__footer,\n.rh-form-list__footer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 32px;\n  margin-left: 10px;\n  font-size: 14px;\n}\n.rh-form-field--inline,\n.rh-form-list--inline {\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.rh-form-field--compact,\n.rh-form-list--compact {\n  margin-bottom: 0;\n}\n.rh-form-field--compact .rh-form-field__message,\n.rh-form-field--compact .rh-form-list__message,\n.rh-form-list--compact .rh-form-field__message,\n.rh-form-list--compact .rh-form-list__message {\n  display: none;\n}\n.rh-form-field--required .rh-form-field__header::before,\n.rh-form-field--required .rh-form-list__header::before,\n.rh-form-list--required .rh-form-field__header::before,\n.rh-form-list--required .rh-form-list__header::before {\n  display: inline;\n  content: "*";\n  color: red;\n}\n',""]),e.exports=n},function(e,n,t){(n=t(30)(!1)).push([e.i,'.custom-list-item {\n  margin-bottom: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  min-height: 32px;\n  vertical-align: top;\n}\n.custom-list-item__header {\n  margin-right: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 14px;\n  text-align: right;\n  height: 32px;\n  width: 120px;\n}\n.custom-list-item__header::before {\n  display: none;\n  content: "*";\n  color: red;\n}\n.custom-list-item__container {\n  position: relative;\n  margin-top: auto;\n  margin-bottom: auto;\n  word-break: break-all;\n  word-wrap: break-word;\n}\n.custom-list-item__footer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 32px;\n  margin-left: 10px;\n  font-size: 14px;\n}\n.custom-list-item--inline {\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.custom-list-item--compact {\n  margin-bottom: 0;\n}\n.custom-list-item--required .custom-list-item__header::before {\n  display: inline;\n  content: "*";\n  color: red;\n}\n',""]),e.exports=n},function(e,n,t){"use strict";t.r(n),t.d(n,"defaultFields",(function(){return He})),t.d(n,"formListPath",(function(){return me})),t.d(n,"Form",(function(){return pe})),t.d(n,"classes",(function(){return ae})),t.d(n,"FormItem",(function(){return le})),t.d(n,"FormList",(function(){return fe})),t.d(n,"FormStore",(function(){return Se})),t.d(n,"useFormStore",(function(){return Me}));var r=t(21),i=t.n(r),o=t(6),a=t.n(o),l=t(9),s=t.n(l),u=t(7),c=t.n(u),f=t(10),d=t.n(f),m=t(3),p=t.n(m),h=t(11),v=t.n(h),b=t(12),g=t.n(b),y=t(1),x=t.n(y),j=t(19),k=t.n(j),F=t(8),w=t.n(F),_=t(20),E=t.n(_),q=t(15),O=t.n(q),C=t(16),V=t.n(C),R=t(14),L=t.n(R),N=t(31),A=t.n(N),P=t(32),S=t.n(P),M=t(27),I=t.n(M),T=t(5),H=t.n(T),z=t(28),B=t.n(z),D=t(2),U=t.n(D),W=t(0),G=t.n(W),J=(t(35),t(22)),$=t.n(J),K=G.a.createContext(void 0);var Q=G.a.createContext({});function X(e){var n=x()(e);if(null===e||"boolean"===n||"number"===n||"string"===n)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return H()(e).call(e,(function(e){return X(e)}));if("object"===x()(e)){var t={};for(var r in e)t[r]=X(e[r]);return t}}function Y(){var e=arguments.length<=0?void 0:arguments[0];return e&&e.target?"checkbox"===e.target.type?e.target.checked:e.target.value:e}var Z=t(17),ee=t.n(Z),ne=function(){function e(n){O()(this,e),this.originFun=void 0,this.beforeFun=void 0,this.afterFun=void 0,this.originFun=this.init(n)}return V()(e,[{key:"init",value:function(e){var n=this;return function(){for(var t,r,i,o,a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];var u=null===(t=n.beforeFun)||void 0===t?void 0:t.call.apply(t,U()(r=[n]).call(r,l));if("boolean"!=typeof u||u){var c=null==e?void 0:e.apply(void 0,l);return null===(i=n.afterFun)||void 0===i||i.call.apply(i,U()(o=[n]).call(o,l)),c}}}},{key:"addBefore",value:function(e){return this.beforeFun=e,this.originFun}},{key:"addAfter",value:function(e){return this.afterFun=e,this.originFun}}]),e}(),te=["label","name","valueProp","valueGetter","suffix","rules","path","initialValue","className","children","style"];function re(e,n){var t=a()(e);if(s.a){var r=s()(e);n&&(r=c()(r).call(r,(function(n){return d()(e,n).enumerable}))),t.push.apply(t,r)}return t}function ie(e){for(var n=1;n<arguments.length;n++){var t,r=null!=arguments[n]?arguments[n]:{};if(n%2)p()(t=re(Object(r),!0)).call(t,(function(n){g()(e,n,r[n])}));else if(v.a)Object.defineProperties(e,v()(r));else{var i;p()(i=re(Object(r))).call(i,(function(n){Object.defineProperty(e,n,d()(r,n))}))}}return e}var oe="rh-form-field",ae={field:oe,inline:"".concat(oe,"--inline"),compact:"".concat(oe,"--compact"),required:"".concat(oe,"--required"),error:"".concat(oe,"--error"),header:"".concat(oe,"__header"),container:"".concat(oe,"__container"),control:"".concat(oe,"__control"),message:"".concat(oe,"__message"),footer:"".concat(oe,"__footer")},le=G.a.forwardRef((function(e,n){var t,r,i=e.label,o=e.name,a=e.valueProp,l=void 0===a?"value":a,s=e.valueGetter,u=void 0===s?Y:s,c=e.suffix,f=e.rules,d=e.path,m=e.initialValue,p=e.className,h=e.children,v=e.style,b=w()(e,te),y=d&&o?U()(t="".concat(d,".")).call(t,o):o,x=Object(W.useContext)(K),j=Object(W.useContext)(Q),F=Object(W.useState)(y&&x?x.getFieldValue(y):void 0),_=k()(F,2),E=_[0],q=_[1],O=Object(W.useState)(y&&x?x.getFieldError(y):void 0),C=k()(O,2),V=C[0],R=C[1],L=Object(W.useCallback)((function(){var e=u.apply(void 0,arguments);y&&x&&(x.setFieldValue(y,e),(null==j?void 0:j.onFormChange)&&(null==j||j.onFormChange({name:y,value:e})))}),[y,x,u]),N=new ne(L);!function(e){var n=e.name,t=e.store,r=e.rules,i=e.onChange,o=e.onError;Object(W.useEffect)((function(){if(n&&t){var e=t.subscribeValue(n,i);return function(){e()}}}),[n,t]),Object(W.useEffect)((function(){if(n&&t){var e=t.subscribeError(n,o);return function(){e()}}}),[n,t]),Object(W.useEffect)((function(){if(n&&t)return null==t||t.setFieldRules(n,r),function(){null==t||t.setFieldRules(n,void 0)}}),[n,t,r])}({store:x,name:y,rules:f,onChange:function(){var e=x.getFieldValue(y);q(e)},onError:function(){var e=x.getFieldError(y);R(e)}}),Object(W.useEffect)((function(){if(y&&x)return void 0!==m&&(x.setFieldValue(y,m,!0),q(m)),function(){x.setFieldValue(y,void 0,!0),q(void 0)}}),[y,x,m]);var A=ie(ie({},j),b),P=A.inline,S=A.compact,M=A.required,I=A.labelWidth,T=A.labelAlign,z=A.gutter,B=A.errorClassName,D=void 0===B?"error":B,J=H()(r=G.a.Children).call(r,h,(function(e){var n,t,r=null==e||null===(n=e.type)||void 0===n?void 0:n.displayName;return null!==(t=["FormItem","FormList"])&&void 0!==t&&$()(t).call(t,r)?e&&Object(W.cloneElement)(e,{path:y}):function(e){if(Object(W.isValidElement)(e)&&x){if(y){var n,t=function(e,n){return"function"==typeof e?e(n):e}(l,e&&e.type),r=(null==e?void 0:e.props)||{},i=r.onChange,o=r.className,a=N.addAfter(i),s=(n={className:ee()(o,V&&D)},g()(n,t,E),g()(n,"onChange",a),n);return Object(W.cloneElement)(e,s)}return e}}(e)})),X=ee()(ae.field,P?ae.inline:"",S?ae.compact:"",M?ae.required:"",V?ae.error:"",p||""),Z={width:I,marginRight:z,textAlign:T};return G.a.createElement("div",{ref:n,className:X,style:v},void 0!==i&&G.a.createElement("div",{className:ae.header,style:Z},i),G.a.createElement("div",{className:ae.container},G.a.createElement("div",{className:ae.control},J),G.a.createElement("div",{className:ae.message},V)),void 0!==c&&G.a.createElement("div",{className:ae.footer},c))}));le.displayName="FormItem";var se=["name","children","rules","path","initialValue","label","suffix","className","style"];function ue(e,n){var t=a()(e);if(s.a){var r=s()(e);n&&(r=c()(r).call(r,(function(n){return d()(e,n).enumerable}))),t.push.apply(t,r)}return t}function ce(e){for(var n=1;n<arguments.length;n++){var t,r=null!=arguments[n]?arguments[n]:{};if(n%2)p()(t=ue(Object(r),!0)).call(t,(function(n){g()(e,n,r[n])}));else if(v.a)Object.defineProperties(e,v()(r));else{var i;p()(i=ue(Object(r))).call(i,(function(n){Object.defineProperty(e,n,d()(r,n))}))}}return e}var fe=G.a.forwardRef((function(e,n){var t,r,i=e.name,o=e.children,a=e.rules,l=e.path,s=e.initialValue,u=e.label,f=e.suffix,d=e.className,m=e.style,p=w()(e,se),h=l?U()(t="".concat(l,".")).call(t,i):"".concat(i),v=ce(ce({},Object(W.useContext)(Q)),p),b=v.inline,g=v.compact,y=v.required,x=v.labelWidth,j=v.labelAlign,k=v.gutter;!h||null!=me&&$()(me).call(me,h)||me.push(h);var F=H()(r=G.a.Children).call(r,o,(function(e,n){var t,r,i,o=null===(t=a||[])||void 0===t||null===(r=U()(t).call(t,null==e||null===(i=e.props)||void 0===i?void 0:i.rules))||void 0===r?void 0:c()(r).call(r,(function(e){return!!e}));return e&&Object(W.cloneElement)(e,{path:h,name:"".concat(n),rules:o,initialValue:null==s?void 0:s[n]})})),_=ee()(ae.field,b?ae.inline:"",g?ae.compact:"",y?ae.required:"",d||""),E={width:x,marginRight:k,textAlign:j};return G.a.createElement("div",{ref:n,className:_,style:m},void 0!==u&&G.a.createElement("div",{className:ae.header,style:E},u),G.a.createElement("div",{className:ae.container},F),void 0!==f&&G.a.createElement("div",{className:ae.footer},f))}));fe.displayName="FormList";var de=["className","style","children","store","onSubmit","onReset","onMount"],me=[];function pe(e){var n=e.className,t=void 0===n?"":n,r=e.style,i=e.children,o=e.store,a=e.onSubmit,l=e.onReset,s=e.onMount,u=w()(e,de),c="rh-form "+t;return Object(W.useEffect)((function(){s&&s()}),[]),G.a.createElement(K.Provider,{value:o},G.a.createElement(Q.Provider,{value:u},G.a.createElement("form",{className:c,style:r,onSubmit:a,onReset:l},i)))}pe.Item=le,pe.List=fe;var he=t(13),ve=t.n(he),be=t(4),ge=t.n(be),ye=t(26),xe=t.n(ye),je=t(18),ke=t.n(je),Fe=t(23),we=t.n(Fe),_e=t(24),Ee=t.n(_e),qe=t(25),Oe=t.n(qe);function Ce(e){return Array.isArray(e)||"string"==typeof e||e instanceof String?0===e.length:e instanceof Ee.a||e instanceof Oe.a?0===e.size:"[object Object]"==={}.toString.call(e)?0===a()(e).length:null==e}var Ve=function(e,n){var t=function(e){return e instanceof ke.a?e:"function"==typeof e?ve()(ge.a.mark((function n(){return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))():ke.a.resolve(e)},r=[];return null==e?void 0:we()(e).call(e,(function(e,i,o){return null==e?void 0:e.then(function(){var e=ve()(ge.a.mark((function e(a){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a){e.next=2;break}return e.abrupt("return");case 2:return r.push(a),e.next=5,null==n?void 0:n(a,r,o);case 5:if(!e.sent){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",t(i));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),t(null==e?void 0:e[0])).then((function(e){var n,t;return ke.a.resolve(null===(n=U()(t=[]).call(t,r,[e]))||void 0===n?void 0:c()(n).call(n,(function(e){return!Ce(e)})))}))},Re=t(33),Le=t.n(Re),Ne=t(34);function Ae(e,n,t,r){return"object"!==x()(e)?e:Object(Ne.produce)(e,(function(e){for(var i=Array.isArray(n)?n:n.replace(/\[/g,".").replace(/\]/g,"").split("."),o=i.length,a=function(n){var a=i[n],l=null==r?void 0:Le()(r).call(r,(function(e){var n=null==e?void 0:e.split(".");return n[(null==n?void 0:n.length)-1]===a}));n===o-1?void 0===t?delete e[a]:e[a]=t:"object"!==x()(e[a])&&l?e[a]=[]:"object"!==x()(e[a])&&(e[a]={}),e=e[a]},l=0;l<o;l++)a(l)}))}function Pe(e,n){var t=a()(e);if(s.a){var r=s()(e);n&&(r=c()(r).call(r,(function(n){return d()(e,n).enumerable}))),t.push.apply(t,r)}return t}var Se=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;O()(this,e),this.initialValues=void 0,this.valueListeners=[],this.errorListeners=[],this.values=void 0,this.formRules=void 0,this.formErrors={},this.initialValues=n,this.values=X(n),this.formRules=t||{},this.getFieldValue=this.getFieldValue.bind(this),this.setFieldValue=this.setFieldValue.bind(this),this.setFieldsValue=this.setFieldsValue.bind(this),this.setFieldRules=this.setFieldRules.bind(this),this.setFieldsRules=this.setFieldsRules.bind(this),this.reset=this.reset.bind(this),this.getFieldError=this.getFieldError.bind(this),this.setFieldError=this.setFieldError.bind(this),this.setFieldsError=this.setFieldsError.bind(this),this.validate=this.validate.bind(this),this.subscribeValue=this.subscribeValue.bind(this),this.subscribeError=this.subscribeError.bind(this)}var n,t,r,i;return V()(e,[{key:"setFieldRules",value:function(e,n){e&&(void 0===n?delete this.formRules[e]:this.formRules[e]=n)}},{key:"setFieldsRules",value:function(e){this.formRules=X(e)}},{key:"notifyValue",value:function(e){var n,t;e?p()(n=this.valueListeners).call(n,(function(n){(null==n?void 0:n.name)===e&&(null==n?void 0:n.onChange)&&(null==n||n.onChange(null==n?void 0:n.name))})):p()(t=this.valueListeners).call(t,(function(e){return e.onChange(null==e?void 0:e.name)}))}},{key:"notifyError",value:function(e){var n,t;e?p()(n=this.errorListeners).call(n,(function(n){(null==n?void 0:n.name)===e&&(null==n?void 0:n.onChange)&&(null==n||n.onChange(null==n?void 0:n.name))})):p()(t=this.errorListeners).call(t,(function(e){return e.onChange(null==e?void 0:e.name)}))}},{key:"getFieldValue",value:function(e){return void 0===e?function(e){for(var n=1;n<arguments.length;n++){var t,r=null!=arguments[n]?arguments[n]:{};if(n%2)p()(t=Pe(Object(r),!0)).call(t,(function(n){g()(e,n,r[n])}));else if(v.a)Object.defineProperties(e,v()(r));else{var i;p()(i=Pe(Object(r))).call(i,(function(n){Object.defineProperty(e,n,d()(r,n))}))}}return e}({},xe()(this)):(n=xe()(this),t=e,we()(i=Array.isArray(t)?t:t.replace(/\[/g,".").replace(/\]/g,"").split(".")).call(i,(function(e,n){return(e||{})[n]}),n)||r);var n,t,r,i}},{key:"setFieldValue",value:(i=ve()(ge.a.mark((function e(n,t,r){var i,o,l,s=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof n){e.next=8;break}if(this.values=Ae(xe()(this),n,t,me),this.notifyValue(n),null===(i=this.formRules)||void 0===i||null===(o=i[n])||void 0===o||!o.length){e.next=6;break}return e.next=6,this.validate(n,r);case 6:e.next=11;break;case 8:if("object"!==x()(n)){e.next=11;break}return e.next=11,ke.a.all(H()(l=a()(n)).call(l,(function(e){return s.setFieldValue(e,null==n?void 0:n[e])})));case 11:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return i.apply(this,arguments)})},{key:"setFieldsValue",value:(r=ve()(ge.a.mark((function e(n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.values=X(n),this.notifyValue();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"reset",value:function(){this.setFieldsError({}),this.setFieldsValue(this.initialValues)}},{key:"getFieldError",value:function(e){return e?this.formErrors[e]:this.formErrors}},{key:"setFieldError",value:function(e,n){e&&(void 0===n?delete this.formErrors[e]:this.formErrors[e]=n,this.notifyError(e))}},{key:"setFieldsError",value:(t=ve()(ge.a.mark((function e(n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.formErrors=X(n),this.notifyError();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"validate",value:(n=ve()(ge.a.mark((function e(n,t){var r,i,o,l,s,u,f,d,m,p=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=8;break}return e.next=3,ke.a.all(null===(r=a()(this.formRules))||void 0===r?void 0:H()(r).call(r,(function(e){var n;return(null===(n=p.formRules)||void 0===n?void 0:n[e])&&p.validate(e)})));case 3:return o=e.sent,l=null==o||null===(i=c()(o).call(o,(function(e){return void 0!==e})))||void 0===i?void 0:i[0],e.abrupt("return",{error:l,values:this.getFieldValue()});case 8:if(!0!==t){e.next=10;break}return e.abrupt("return");case 10:return this.setFieldError(n,void 0),s=this.getFieldValue(n),u=this.formRules[n],f=function(){var e=ve()(ge.a.mark((function e(n){var t,r,i;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==n.required||!Ce(s)){e.next=4;break}return e.abrupt("return",n.message||!0);case 4:if(!n.validator){e.next=14;break}return e.next=7,n.validator(s,(function(e){t=!0,e&&(r=e)}));case 7:if(i=e.sent,!t||!r){e.next=12;break}return e.abrupt("return",r);case 12:if(!i){e.next=14;break}return e.abrupt("return",n.message||!0);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.next=16,Ve(null==u?void 0:H()(u).call(u,(function(e){return function(){return f(e)}})),(function(e){return e}));case 16:return d=e.sent,(m=null==d?void 0:d[0])&&this.setFieldError(n,m),e.abrupt("return",m);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"subscribeValue",value:function(e,n){var t=this;return this.valueListeners.push({onChange:n,name:e}),function(){var n;t.valueListeners=c()(n=t.valueListeners).call(n,(function(n){return n.name!==e}))}}},{key:"subscribeError",value:function(e,n){var t=this;return this.errorListeners.push({onChange:n,name:e}),function(){var n;t.errorListeners=c()(n=t.errorListeners).call(n,(function(n){return n.name!==e}))}}}]),e}();function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return Object(W.useMemo)((function(){return new Se(e,n)}),[])}t(36);var Ie={field:"custom-list-item",inline:"".concat("custom-list-item","--inline"),compact:"".concat("custom-list-item","--compact"),required:"".concat("custom-list-item","--required"),header:"".concat("custom-list-item","__header"),container:"".concat("custom-list-item","__container"),footer:"".concat("custom-list-item","__footer")},Te=G.a.forwardRef((function(e,n){var t=e.label,r=e.suffix,i=e.inline,o=e.compact,a=e.required,l=e.labelWidth,s=e.labelAlign,u=e.gutter,c=e.className,f=e.children,d=e.style,m=ee()(Ie.field,i?Ie.inline:"",o?Ie.compact:"",a?Ie.required:"",c||""),p={width:l,marginRight:u,textAlign:s};return G.a.createElement("div",{ref:n,className:m,style:d},void 0!==t&&G.a.createElement("div",{className:Ie.header,style:p},t),G.a.createElement("div",{className:Ie.container},f),void 0!==r&&G.a.createElement("div",{className:Ie.footer},r))}));Te.displayName="ListItem";var He={"Form.Item":pe.Item,"Form.List":pe.List,"List.Item":Te},ze=t(29),Be=t.n(ze);function De(e,n){if("object"!=x()(e)||"object"!==x()(n))return e===n;var t=Be()(e),r=Be()(n);if(t.length!=r.length)return!1;for(var i=0;i<t.length;i++){var o=t[i],a=e[o],l=n[o];if("object"===x()(a)){if(!De(a,l))return!1}else if(a!==l)return!1}return!0}var Ue,We,Ge=(We=[],function e(n,t,r){for(var i in n){var o;if(Ue=r?U()(o="".concat(r,".")).call(o,i):i,i===t){var a=n[i];a&&r&&We.push({path:r,value:a})}"object"===x()(n[i])&&(We=e(n[i],t,Ue))}return We}),Je=function(){function e(n){O()(this,e),this.originFun=void 0,this.beforeFun=void 0,this.afterFun=void 0,this.originFun=this.init(n)}return V()(e,[{key:"init",value:function(e){var n=this;return function(){for(var t,r,i,o,a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];var u=null===(t=n.beforeFun)||void 0===t?void 0:t.call.apply(t,U()(r=[n]).call(r,l));if("boolean"!=typeof u||u){var c=null==e?void 0:e.apply(void 0,l);return null===(i=n.afterFun)||void 0===i||i.call.apply(i,U()(o=[n]).call(o,l)),c}}}},{key:"addBefore",value:function(e){return"function"==typeof e&&(this.beforeFun=e),this.originFun}},{key:"addAfter",value:function(e){return"function"==typeof e&&(this.afterFun=e),this.originFun}}]),e}();var $e=["properties","component","props"],Ke=["children"],Qe=["render"],Xe=["properties","component","props","hidden"],Ye=["schema"],Ze=["properties"];function en(e,n){var t=a()(e);if(s.a){var r=s()(e);n&&(r=c()(r).call(r,(function(n){return d()(e,n).enumerable}))),t.push.apply(t,r)}return t}function nn(e){for(var n=1;n<arguments.length;n++){var t,r=null!=arguments[n]?arguments[n]:{};if(n%2)p()(t=en(Object(r),!0)).call(t,(function(n){g()(e,n,r[n])}));else if(v.a)Object.defineProperties(e,v()(r));else{var i;p()(i=en(Object(r))).call(i,(function(n){Object.defineProperty(e,n,d()(r,n))}))}}return e}function tn(e){var n=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=I()(e);if(n){var o=I()(this).constructor;t=i()(r,arguments,o)}else t=r.apply(this,arguments);return S()(this,t)}}var rn=function(e){A()(t,e);var n=tn(t);function t(e){var r;return O()(this,t),(r=n.call(this,e)).aopFormOnChange=void 0,r.aopFormMount=void 0,r.state={hiddenMap:{}},r.getFormList=r.getFormList.bind(L()(r)),r.generateTree=r.generateTree.bind(L()(r)),r.generateChildren=r.generateChildren.bind(L()(r)),r.renderFormItem=r.renderFormItem.bind(L()(r)),r.onFormChange=r.onFormChange.bind(L()(r)),r.onFormMount=r.onFormMount.bind(L()(r)),r.handleHidden=r.handleHidden.bind(L()(r)),r.isHidden=r.isHidden.bind(L()(r)),r.aopFormOnChange=new Je(r.onFormChange),r.aopFormMount=new Je(r.onFormMount),r}return V()(t,[{key:"onFormMount",value:function(){this.handleHidden()}},{key:"componentDidUpdate",value:function(e,n){!De(this.props.schema,e.schema)&&this.handleHidden()}},{key:"handleHidden",value:function(){for(var e,n,t=Ge(null===(e=this.props)||void 0===e||null===(n=e.schema)||void 0===n?void 0:n.properties,"hidden"),r={},i=0;i<(null==t?void 0:t.length);i++){var o=t[i];if(o){var a,l=null==o?void 0:o.path,s=null==l||null===(a=l.split(".properties."))||void 0===a?void 0:a.join("."),u=null==o?void 0:o.value;r[s]=this.isHidden(u)}}this.setState({hiddenMap:r})}},{key:"onFormChange",value:function(e){this.handleHidden()}},{key:"isHidden",value:function(e){if("boolean"==typeof e)return!0;if("string"==typeof e){var n,t=null==e?void 0:e.replace(/\{\{|\}\}|\s*/g,"");t=null===(n=t)||void 0===n?void 0:n.replace(/\$form/g,"this?.props?.store?.getFieldValue()");var r=new Function("return "+t).apply(this);return r}}},{key:"generateChildren",value:function(e){var n=this,t=this.props.widgets;return e instanceof Array?null==e?void 0:H()(e).call(e,(function(e){var r=e.component,i=e.props,o=null==t?void 0:t[r];return G.a.createElement(o,E()({},i,{children:n.generateChildren(null==i?void 0:i.children)}))})):e}},{key:"renderFormItem",value:function(e,n){var t=this.props,r=t.widgets,i=t.Fields,o=(n.properties,n.component),a=n.props,l=w()(n,$e),s=a||{},u=s.children,c=w()(s,Ke),f=null==i?void 0:i["Form.Item"],d=o&&(null==r?void 0:r[o]);return G.a.createElement(f,E()({},l,{key:e,name:e}),G.a.createElement(d,c,this.generateChildren(u)))}},{key:"renderListItem",value:function(e,n){var t=this.props.Fields,r=n.render,i=w()(n,Qe),o=null==t?void 0:t["List.Item"];return G.a.createElement(o,E()({},i,{key:e}),r)}},{key:"renderProperties",value:function(e){var n,t,r=this,i=e||{},o=i.name,a=i.field,l=i.path,s=this.props.Fields,u=a.properties,c=(a.component,a.props,a.hidden,w()(a,Xe));return t=u instanceof Array?s["Form.List"]:s["Form.Item"],G.a.createElement(t,E()({},c,{key:o,name:o}),u instanceof Array?null==u?void 0:H()(u).call(u,(function(e,n){return r.generateTree({name:"".concat(n),field:e,path:l})})):null===(n=B()(u||{}))||void 0===n?void 0:H()(n).call(n,(function(e){var n=k()(e,2),t=n[0],i=n[1];return r.generateTree({name:t,field:i,path:l})})))}},{key:"generateTree",value:function(e){var n,t,r=e||{},i=r.name,o=r.field,l=r.path,s=o.properties,u=o.render,c=l?U()(n="".concat(l,".")).call(n,i):i;if(!this.state.hiddenMap[c])return u?this.renderListItem(i,o):"object"===x()(s)?(t=s,!(Array.isArray(t)||"string"==typeof t||t instanceof String?0===t.length:t instanceof Ee.a||t instanceof Oe.a?0===t.size:"[object Object]"==={}.toString.call(t)?0===a()(t).length:null==t)&&this.renderProperties({name:i,field:o,path:c})):this.renderFormItem(i,o)}},{key:"getFormList",value:function(e){var n,t=this;return H()(n=B()(e||{})).call(n,(function(e){var n=k()(e,2),r=n[0],i=n[1];return t.generateTree({name:r,field:i})}))}},{key:"render",value:function(){var e=this.props,n=e.schema,t=w()(e,Ye),r=n||{},i=r.properties,o=w()(r,Ze),a=(null==t?void 0:t.onFormChange)||(null==o?void 0:o.onFormChange),l=(null==t?void 0:t.onMount)||(null==o?void 0:o.onMount),s=this.aopFormOnChange.addAfter(a),u=this.aopFormMount.addAfter(l);return G.a.createElement(pe,E()({},o,t,{onFormChange:s,onMount:u}),this.getFormList(i))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return!De(e.schema,n.prevSchema)?nn(nn({},n),{},{prevSchema:e.schema}):null}}]),t}(G.a.Component);rn.defaultProps={widgets:{},Fields:He};var on=rn;n.default=on}]);