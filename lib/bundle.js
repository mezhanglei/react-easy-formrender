module.exports=function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=36)}([function(e,n){e.exports=require("react")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/typeof")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/concat")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/for-each")},function(e,n){e.exports=require("@babel/runtime-corejs3/regenerator")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/map")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/filter")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/keys")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/objectWithoutProperties")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/defineProperty")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/asyncToGenerator")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/assertThisInitialized")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/classCallCheck")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/createClass")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/promise")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/slicedToArray")},function(e,n){e.exports=require("classnames")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/reflect/construct")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/extends")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/includes")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/reduce")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/values")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/getPrototypeOf")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/entries")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-names")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/inherits")},function(e,n){e.exports=require("@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/map")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/set")},function(e,n){e.exports=require("@babel/runtime-corejs3/core-js/instance/some")},function(e,n){e.exports=require("immer")},function(e,n,r){(n=r(35)(!1)).push([e.i,'.rh-form-field,\n.rh-form-list {\n  margin-bottom: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  min-height: 32px;\n  vertical-align: top;\n}\n.rh-form-field__header,\n.rh-form-list__header {\n  margin-right: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 14px;\n  text-align: right;\n  height: 32px;\n  width: 120px;\n}\n.rh-form-field__header::before,\n.rh-form-list__header::before {\n  display: none;\n  content: "*";\n  color: red;\n}\n.rh-form-field__container,\n.rh-form-list__container {\n  position: relative;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-top: auto;\n  margin-bottom: auto;\n}\n.rh-form-field__message,\n.rh-form-list__message {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  font-size: 12px;\n  color: red;\n}\n.rh-form-field__footer,\n.rh-form-list__footer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 32px;\n  margin-left: 10px;\n  font-size: 14px;\n}\n.rh-form-field--inline,\n.rh-form-list--inline {\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.rh-form-field--compact,\n.rh-form-list--compact {\n  margin-bottom: 0;\n}\n.rh-form-field--compact .rh-form-field__message,\n.rh-form-field--compact .rh-form-list__message,\n.rh-form-list--compact .rh-form-field__message,\n.rh-form-list--compact .rh-form-list__message {\n  display: none;\n}\n.rh-form-field--required .rh-form-field__header::before,\n.rh-form-field--required .rh-form-list__header::before,\n.rh-form-list--required .rh-form-field__header::before,\n.rh-form-list--required .rh-form-list__header::before {\n  display: inline;\n  content: "*";\n  color: red;\n}\n',""]),e.exports=n},function(e,n,r){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var r=function(e,n){var r=e[1]||"",t=e[3];if(!t)return r;if(n&&"function"==typeof btoa){var i=(a=t,l=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(u," */")),o=t.sources.map((function(e){return"/*# sourceURL=".concat(t.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([i]).join("\n")}var a,l,u;return[r].join("\n")}(n,e);return n[2]?"@media ".concat(n[2]," {").concat(r,"}"):r})).join("")},n.i=function(e,r,t){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(t)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);t&&i[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),n.push(u))}},n}},function(e,n,r){"use strict";r.r(n),r.d(n,"defaultFields",(function(){return Ie})),r.d(n,"formListPath",(function(){return he})),r.d(n,"Form",(function(){return pe})),r.d(n,"classes",(function(){return ae})),r.d(n,"FormItem",(function(){return le})),r.d(n,"FormList",(function(){return fe})),r.d(n,"FormStore",(function(){return Me})),r.d(n,"useFormStore",(function(){return Se}));var t=r(20),i=r.n(t),o=r(7),a=r.n(o),l=r(8),u=r.n(l),s=r(6),c=r.n(s),f=r(9),d=r.n(f),h=r(3),p=r.n(h),m=r(10),v=r.n(m),b=r(12),g=r.n(b),y=r(18),x=r.n(y),j=r(1),F=r.n(j),k=r(11),w=r.n(k),E=r(21),_=r.n(E),O=r(15),q=r.n(O),C=r(16),V=r.n(C),R=r(14),L=r.n(R),P=r(28),N=r.n(P),A=r(29),M=r.n(A),S=r(25),I=r.n(S),T=r(5),H=r.n(T),z=r(2),B=r.n(z),D=r(26),U=r.n(D),G=r(0),W=r.n(G),J=(r(34),r(22)),K=r.n(J),Q=W.a.createContext(void 0);var X=W.a.createContext({});function Y(e){var n=F()(e);if(null===e||"boolean"===n||"number"===n||"string"===n)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return H()(e).call(e,(function(e){return Y(e)}));if("object"===F()(e)){var r={};for(var t in e)r[t]=Y(e[t]);return r}}function Z(){var e=arguments.length<=0?void 0:arguments[0];return e&&e.target?"checkbox"===e.target.type?e.target.checked:e.target.value:e}var $=r(19),ee=r.n($),ne=function(){function e(n){q()(this,e),this.originFun=void 0,this.beforeFun=void 0,this.afterFun=void 0,this.originFun=this.init(n)}return V()(e,[{key:"init",value:function(e){var n=this;return function(){for(var r,t,i,o,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var s=null===(r=n.beforeFun)||void 0===r?void 0:r.call.apply(r,B()(t=[n]).call(t,l));if("boolean"!=typeof s||s){var c=null==e?void 0:e.apply(void 0,l);return null===(i=n.afterFun)||void 0===i||i.call.apply(i,B()(o=[n]).call(o,l)),c}}}},{key:"addBefore",value:function(e){return this.beforeFun=e,this.originFun}},{key:"addAfter",value:function(e){return this.afterFun=e,this.originFun}}]),e}(),re=["className","label","name","valueProp","valueGetter","suffix","children","rules","style","path","initialValue"];function te(e,n){var r=a()(e);if(u.a){var t=u()(e);n&&(t=c()(t).call(t,(function(n){return d()(e,n).enumerable}))),r.push.apply(r,t)}return r}function ie(e){for(var n=1;n<arguments.length;n++){var r,t=null!=arguments[n]?arguments[n]:{};if(n%2)p()(r=te(Object(t),!0)).call(r,(function(n){g()(e,n,t[n])}));else if(v.a)Object.defineProperties(e,v()(t));else{var i;p()(i=te(Object(t))).call(i,(function(n){Object.defineProperty(e,n,d()(t,n))}))}}return e}var oe="rh-form-field",ae={field:oe,inline:"".concat(oe,"--inline"),compact:"".concat(oe,"--compact"),required:"".concat(oe,"--required"),error:"".concat(oe,"--error"),header:"".concat(oe,"__header"),container:"".concat(oe,"__container"),control:"".concat(oe,"__control"),message:"".concat(oe,"__message"),footer:"".concat(oe,"__footer")},le=W.a.forwardRef((function(e,n){var r,t,i=e.className,o=e.label,a=e.name,l=e.valueProp,u=void 0===l?"value":l,s=e.valueGetter,c=void 0===s?Z:s,f=e.suffix,d=e.children,h=e.rules,p=e.style,m=e.path,v=e.initialValue,b=w()(e,re),y=m&&a?B()(r="".concat(m,".")).call(r,a):a,j=Object(G.useContext)(Q),F=Object(G.useContext)(X),k=Object(G.useState)(y&&j?j.getFieldValue(y):void 0),E=x()(k,2),_=E[0],O=E[1],q=Object(G.useState)(y&&j?j.getFieldError(y):void 0),C=x()(q,2),V=C[0],R=C[1],L=Object(G.useCallback)((function(){var e=c.apply(void 0,arguments);y&&j&&(j.setFieldValue(y,e),(null==F?void 0:F.onFormChange)&&(null==F||F.onFormChange({name:y,value:e})))}),[y,j,c]),P=new ne(L);!function(e){var n=e.name,r=e.store,t=e.rules,i=e.onChange,o=e.onError;Object(G.useEffect)((function(){if(n&&r){var e=r.subscribeValue(n,i);return function(){e()}}}),[n,r]),Object(G.useEffect)((function(){if(n&&r){var e=r.subscribeError(n,o);return function(){e()}}}),[n,r]),Object(G.useEffect)((function(){if(n&&r)return null==r||r.setFieldRules(n,t),function(){null==r||r.setFieldRules(n,void 0)}}),[n,r,t])}({store:j,name:y,rules:h,onChange:function(){var e=j.getFieldValue(y);O(e)},onError:function(){var e=j.getFieldError(y);R(e)}}),Object(G.useEffect)((function(){if(y&&j)return void 0!==v&&(j.setFieldValue(y,v,!0),O(v)),function(){j.setFieldValue(y,void 0,!0),O(void 0)}}),[y,j,v]);var N=ie(ie({},F),b),A=N.inline,M=N.compact,S=N.required,I=N.labelWidth,T=N.labelAlign,z=N.gutter,D=N.errorClassName,U=void 0===D?"error":D,J=H()(t=W.a.Children).call(t,d,(function(e){var n,r,t=null==e||null===(n=e.type)||void 0===n?void 0:n.displayName;return null!==(r=["FormItem","FormList"])&&void 0!==r&&K()(r).call(r,t)?e&&Object(G.cloneElement)(e,{path:y}):function(e){if(Object(G.isValidElement)(e)&&j){if(y){var n,r=function(e,n){return"function"==typeof e?e(n):e}(u,e&&e.type),t=(null==e?void 0:e.props)||{},i=t.onChange,o=t.className,a=P.addAfter(i),l=(n={className:ee()(o,V&&U)},g()(n,r,_),g()(n,"onChange",a),n);return Object(G.cloneElement)(e,l)}return e}}(e)})),Y=ee()(ae.field,A?ae.inline:"",M?ae.compact:"",S?ae.required:"",V?ae.error:"",i||""),$={width:I,marginRight:z,textAlign:T};return W.a.createElement("div",{ref:n,className:Y,style:p},void 0!==o&&W.a.createElement("div",{className:ae.header,style:$},o),W.a.createElement("div",{className:ae.container},W.a.createElement("div",{className:ae.control},J),W.a.createElement("div",{className:ae.message},V)),void 0!==f&&W.a.createElement("div",{className:ae.footer},f))}));le.displayName="FormItem";var ue=["name","children","rules","path","initialValue","label","className","style"];function se(e,n){var r=a()(e);if(u.a){var t=u()(e);n&&(t=c()(t).call(t,(function(n){return d()(e,n).enumerable}))),r.push.apply(r,t)}return r}function ce(e){for(var n=1;n<arguments.length;n++){var r,t=null!=arguments[n]?arguments[n]:{};if(n%2)p()(r=se(Object(t),!0)).call(r,(function(n){g()(e,n,t[n])}));else if(v.a)Object.defineProperties(e,v()(t));else{var i;p()(i=se(Object(t))).call(i,(function(n){Object.defineProperty(e,n,d()(t,n))}))}}return e}var fe=W.a.forwardRef((function(e,n){var r,t,i=e.name,o=e.children,a=e.rules,l=e.path,u=e.initialValue,s=e.label,f=e.className,d=e.style,h=w()(e,ue),p=l?B()(r="".concat(l,".")).call(r,i):"".concat(i),m=ce(ce({},Object(G.useContext)(X)),h),v=m.inline,b=m.compact,g=m.required,y=m.labelWidth,x=m.labelAlign,j=m.gutter;!p||null!=he&&K()(he).call(he,p)||he.push(p);var F=H()(t=W.a.Children).call(t,o,(function(e,n){var r,t,i,o=null===(r=a||[])||void 0===r||null===(t=B()(r).call(r,null==e||null===(i=e.props)||void 0===i?void 0:i.rules))||void 0===t?void 0:c()(t).call(t,(function(e){return!!e}));return e&&Object(G.cloneElement)(e,{path:p,name:"".concat(n),rules:o,initialValue:null==u?void 0:u[n]})})),k=ee()(ae.field,v?ae.inline:"",b?ae.compact:"",g?ae.required:"",f||""),E={width:y,marginRight:j,textAlign:x};return W.a.createElement("div",{ref:n,className:k,style:d},void 0!==s&&W.a.createElement("div",{className:ae.header,style:E},s),W.a.createElement("div",{className:ae.container},F))}));fe.displayName="FormList";var de=["className","style","children","store","onSubmit","onReset","onMount"],he=[];function pe(e){var n=e.className,r=void 0===n?"":n,t=e.style,i=e.children,o=e.store,a=e.onSubmit,l=e.onReset,u=e.onMount,s=w()(e,de),c="rh-form "+r;return Object(G.useEffect)((function(){u&&u()}),[]),W.a.createElement(Q.Provider,{value:o},W.a.createElement(X.Provider,{value:s},W.a.createElement("form",{className:c,style:t,onSubmit:a,onReset:l},i)))}pe.Item=le,pe.List=fe;var me=r(13),ve=r.n(me),be=r(4),ge=r.n(be),ye=r(24),xe=r.n(ye),je=r(17),Fe=r.n(je),ke=r(23),we=r.n(ke),Ee=r(30),_e=r.n(Ee),Oe=r(31),qe=r.n(Oe);function Ce(e){return Array.isArray(e)||"string"==typeof e||e instanceof String?0===e.length:e instanceof _e.a||e instanceof qe.a?0===e.size:"[object Object]"==={}.toString.call(e)?0===a()(e).length:null==e}var Ve=function(e,n){var r=function(e){return e instanceof Fe.a?e:"function"==typeof e?ve()(ge.a.mark((function n(){return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))():Fe.a.resolve(e)},t=[];return null==e?void 0:we()(e).call(e,(function(e,i,o){return null==e?void 0:e.then(function(){var e=ve()(ge.a.mark((function e(a){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a){e.next=2;break}return e.abrupt("return");case 2:return t.push(a),e.next=5,null==n?void 0:n(a,t,o);case 5:if(!e.sent){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",r(i));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),r(null==e?void 0:e[0])).then((function(e){var n,r;return Fe.a.resolve(null===(n=B()(r=[]).call(r,t,[e]))||void 0===n?void 0:c()(n).call(n,(function(e){return!Ce(e)})))}))},Re=r(32),Le=r.n(Re),Pe=r(33);function Ne(e,n,r,t){return"object"!==F()(e)?e:Object(Pe.produce)(e,(function(e){for(var i=Array.isArray(n)?n:n.replace(/\[/g,".").replace(/\]/g,"").split("."),o=i.length,a=function(n){var a=i[n],l=null==t?void 0:Le()(t).call(t,(function(e){var n=null==e?void 0:e.split(".");return n[(null==n?void 0:n.length)-1]===a}));n===o-1?void 0===r?delete e[a]:e[a]=r:"object"!==F()(e[a])&&l?e[a]=[]:"object"!==F()(e[a])&&(e[a]={}),e=e[a]},l=0;l<o;l++)a(l)}))}function Ae(e,n){var r=a()(e);if(u.a){var t=u()(e);n&&(t=c()(t).call(t,(function(n){return d()(e,n).enumerable}))),r.push.apply(r,t)}return r}var Me=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;q()(this,e),this.initialValues=void 0,this.valueListeners=[],this.errorListeners=[],this.values=void 0,this.formRules=void 0,this.formErrors={},this.initialValues=n,this.values=Y(n),this.formRules=r||{},this.getFieldValue=this.getFieldValue.bind(this),this.setFieldValue=this.setFieldValue.bind(this),this.setFieldsValue=this.setFieldsValue.bind(this),this.setFieldRules=this.setFieldRules.bind(this),this.setFieldsRules=this.setFieldsRules.bind(this),this.reset=this.reset.bind(this),this.getFieldError=this.getFieldError.bind(this),this.setFieldError=this.setFieldError.bind(this),this.setFieldsError=this.setFieldsError.bind(this),this.validate=this.validate.bind(this),this.subscribeValue=this.subscribeValue.bind(this),this.subscribeError=this.subscribeError.bind(this)}var n,r,t,i;return V()(e,[{key:"setFieldRules",value:function(e,n){e&&(void 0===n?delete this.formRules[e]:this.formRules[e]=n)}},{key:"setFieldsRules",value:function(e){this.formRules=Y(e)}},{key:"notifyValue",value:function(e){var n,r;e?p()(n=this.valueListeners).call(n,(function(n){(null==n?void 0:n.name)===e&&(null==n?void 0:n.onChange)&&(null==n||n.onChange(null==n?void 0:n.name))})):p()(r=this.valueListeners).call(r,(function(e){return e.onChange(null==e?void 0:e.name)}))}},{key:"notifyError",value:function(e){var n,r;e?p()(n=this.errorListeners).call(n,(function(n){(null==n?void 0:n.name)===e&&(null==n?void 0:n.onChange)&&(null==n||n.onChange(null==n?void 0:n.name))})):p()(r=this.errorListeners).call(r,(function(e){return e.onChange(null==e?void 0:e.name)}))}},{key:"getFieldValue",value:function(e){return void 0===e?function(e){for(var n=1;n<arguments.length;n++){var r,t=null!=arguments[n]?arguments[n]:{};if(n%2)p()(r=Ae(Object(t),!0)).call(r,(function(n){g()(e,n,t[n])}));else if(v.a)Object.defineProperties(e,v()(t));else{var i;p()(i=Ae(Object(t))).call(i,(function(n){Object.defineProperty(e,n,d()(t,n))}))}}return e}({},xe()(this)):(n=xe()(this),r=e,we()(i=Array.isArray(r)?r:r.replace(/\[/g,".").replace(/\]/g,"").split(".")).call(i,(function(e,n){return(e||{})[n]}),n)||t);var n,r,t,i}},{key:"setFieldValue",value:(i=ve()(ge.a.mark((function e(n,r,t){var i,o,l,u=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof n){e.next=8;break}if(this.values=Ne(xe()(this),n,r,he),this.notifyValue(n),null===(i=this.formRules)||void 0===i||null===(o=i[n])||void 0===o||!o.length){e.next=6;break}return e.next=6,this.validate(n,t);case 6:e.next=11;break;case 8:if(!n){e.next=11;break}return e.next=11,Fe.a.all(H()(l=a()(n)).call(l,(function(e){return u.setFieldValue(e,n[e])})));case 11:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return i.apply(this,arguments)})},{key:"setFieldsValue",value:(t=ve()(ge.a.mark((function e(n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.values=Y(n),this.notifyValue();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.setFieldsError({}),this.setFieldsValue(this.initialValues)}},{key:"getFieldError",value:function(e){return e?this.formErrors[e]:this.formErrors}},{key:"setFieldError",value:function(e,n){e&&(void 0===n?delete this.formErrors[e]:this.formErrors[e]=n,this.notifyError(e))}},{key:"setFieldsError",value:(r=ve()(ge.a.mark((function e(n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.formErrors=Y(n),this.notifyError();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"validate",value:(n=ve()(ge.a.mark((function e(n,r){var t,i,o,l,u,s,f,d,h,p=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=8;break}return e.next=3,Fe.a.all(null===(t=a()(this.formRules))||void 0===t?void 0:H()(t).call(t,(function(e){var n;return(null===(n=p.formRules)||void 0===n?void 0:n[e])&&p.validate(e)})));case 3:return o=e.sent,l=null==o||null===(i=c()(o).call(o,(function(e){return void 0!==e})))||void 0===i?void 0:i[0],e.abrupt("return",{error:l,values:this.getFieldValue()});case 8:if(!0!==r){e.next=10;break}return e.abrupt("return");case 10:return this.setFieldError(n,void 0),u=this.getFieldValue(n),s=this.formRules[n],f=function(){var e=ve()(ge.a.mark((function e(n){var r,t,i;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==n.required||!Ce(u)){e.next=4;break}return e.abrupt("return",n.message||!0);case 4:if(!n.validator){e.next=14;break}return e.next=7,n.validator(u,(function(e){r=!0,e&&(t=e)}));case 7:if(i=e.sent,!r||!t){e.next=12;break}return e.abrupt("return",t);case 12:if(!i){e.next=14;break}return e.abrupt("return",n.message||!0);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.next=16,Ve(null==s?void 0:H()(s).call(s,(function(e){return function(){return f(e)}})),(function(e){return e}));case 16:return d=e.sent,(h=null==d?void 0:d[0])&&this.setFieldError(n,h),e.abrupt("return",h);case 20:case"end":return e.stop()}}),e,this)}))),function(e,r){return n.apply(this,arguments)})},{key:"subscribeValue",value:function(e,n){var r=this;return this.valueListeners.push({onChange:n,name:e}),function(){var n;r.valueListeners=c()(n=r.valueListeners).call(n,(function(n){return n.name!==e}))}}},{key:"subscribeError",value:function(e,n){var r=this;return this.errorListeners.push({onChange:n,name:e}),function(){var n;r.errorListeners=c()(n=r.errorListeners).call(n,(function(n){return n.name!==e}))}}}]),e}();function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return Object(G.useMemo)((function(){return new Me(e,n)}),[])}var Ie={"Form.Item":pe.Item,"Form.List":pe.List},Te=r(27),He=r.n(Te);function ze(e,n){if("object"!=F()(e)||"object"!==F()(n))return e===n;var r=He()(e),t=He()(n);if(r.length!=t.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],a=e[o],l=n[o];if("object"===F()(a)){if(!ze(a,l))return!1}else if(a!==l)return!1}return!0}var Be,De,Ue=(De=[],function e(n,r,t){for(var i in n){var o;if(Be=t?B()(o="".concat(t,".")).call(o,i):i,i===r){var a=n[i];a&&t&&De.push({path:t,value:a})}"object"===F()(n[i])&&(De=e(n[i],r,Be))}return De}),Ge=function(){function e(n){q()(this,e),this.originFun=void 0,this.beforeFun=void 0,this.afterFun=void 0,this.originFun=this.init(n)}return V()(e,[{key:"init",value:function(e){var n=this;return function(){for(var r,t,i,o,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var s=null===(r=n.beforeFun)||void 0===r?void 0:r.call.apply(r,B()(t=[n]).call(t,l));if("boolean"!=typeof s||s){var c=null==e?void 0:e.apply(void 0,l);return null===(i=n.afterFun)||void 0===i||i.call.apply(i,B()(o=[n]).call(o,l)),c}}}},{key:"addBefore",value:function(e){return"function"==typeof e&&(this.beforeFun=e),this.originFun}},{key:"addAfter",value:function(e){return"function"==typeof e&&(this.afterFun=e),this.originFun}}]),e}(),We=["decorator","properties","component","props"],Je=["children"],Ke=["decorator","properties","component","props","hidden"],Qe=["schema"],Xe=["properties"];function Ye(e,n){var r=a()(e);if(u.a){var t=u()(e);n&&(t=c()(t).call(t,(function(n){return d()(e,n).enumerable}))),r.push.apply(r,t)}return r}function Ze(e){for(var n=1;n<arguments.length;n++){var r,t=null!=arguments[n]?arguments[n]:{};if(n%2)p()(r=Ye(Object(t),!0)).call(r,(function(n){g()(e,n,t[n])}));else if(v.a)Object.defineProperties(e,v()(t));else{var i;p()(i=Ye(Object(t))).call(i,(function(n){Object.defineProperty(e,n,d()(t,n))}))}}return e}function $e(e){var n=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,t=I()(e);if(n){var o=I()(this).constructor;r=i()(t,arguments,o)}else r=t.apply(this,arguments);return M()(this,r)}}var en=function(e){N()(r,e);var n=$e(r);function r(e){var t;return q()(this,r),(t=n.call(this,e)).aopFormOnChange=void 0,t.aopFormMount=void 0,t.state={hiddenMap:{}},t.getFormList=t.getFormList.bind(L()(t)),t.generateTree=t.generateTree.bind(L()(t)),t.generateChildren=t.generateChildren.bind(L()(t)),t.renderFormItem=t.renderFormItem.bind(L()(t)),t.onFormChange=t.onFormChange.bind(L()(t)),t.onFormMount=t.onFormMount.bind(L()(t)),t.handleHidden=t.handleHidden.bind(L()(t)),t.isHidden=t.isHidden.bind(L()(t)),t.aopFormOnChange=new Ge(t.onFormChange),t.aopFormMount=new Ge(t.onFormMount),t}return V()(r,[{key:"onFormMount",value:function(){this.handleHidden()}},{key:"componentDidUpdate",value:function(e,n){!ze(this.props.schema,e.schema)&&this.handleHidden()}},{key:"handleHidden",value:function(){for(var e,n,r=Ue(null===(e=this.props)||void 0===e||null===(n=e.schema)||void 0===n?void 0:n.properties,"hidden"),t={},i=0;i<(null==r?void 0:r.length);i++){var o=r[i];if(o){var a,l=null==o?void 0:o.path,u=null==l||null===(a=l.split(".properties."))||void 0===a?void 0:a.join("."),s=null==o?void 0:o.value;t[u]=this.isHidden(s)}}this.setState({hiddenMap:t})}},{key:"onFormChange",value:function(e){this.handleHidden()}},{key:"isHidden",value:function(e){if("boolean"==typeof e)return!0;if("string"==typeof e){var n="return this?.props?.store?.getFieldValue()?."+(null==e?void 0:e.replace(/\{\{|\}\}|\s*/g,"")),r=new Function(n).apply(this);return r}}},{key:"generateChildren",value:function(e){var n=this,r=this.props.widgets;return e instanceof Array?null==e?void 0:H()(e).call(e,(function(e){var t=e.component,i=e.props,o=null==r?void 0:r[t];return W.a.createElement(o,_()({},i,{children:n.generateChildren(null==i?void 0:i.children)}))})):e}},{key:"renderFormItem",value:function(e){var n=e||{},r=n.name,t=n.field,i=this.props,o=i.widgets,a=i.Fields,l=t.decorator,u=void 0===l?"Form.Item":l,s=(t.properties,t.component),c=t.props,f=w()(t,We),d=c||{},h=d.children,p=w()(d,Je),m=null==a?void 0:a[u],v=null==o?void 0:o[s];return W.a.createElement(m,_()({},f,{key:r,name:r}),W.a.createElement(v,p,this.generateChildren(h)))}},{key:"generateTree",value:function(e){var n,r,t=this,i=e||{},o=i.name,a=i.field,l=i.path,u=this.props.Fields,s=a.decorator,c=void 0===s?"Form.Item":s,f=a.properties,d=(a.component,a.props,a.hidden,w()(a,Ke)),h=null==u?void 0:u[c],p=l?B()(n="".concat(l,".")).call(n,o):o;if(!this.state.hiddenMap[p])return"object"===F()(f)?W.a.createElement(h,_()({},d,{key:o,name:o}),f instanceof Array?null==f?void 0:H()(f).call(f,(function(e,n){return t.generateTree({name:"".concat(n),field:e,path:p})})):null===(r=U()(f||{}))||void 0===r?void 0:H()(r).call(r,(function(e){var n=x()(e,2),r=n[0],i=n[1];return t.generateTree({name:r,field:i,path:p})}))):this.renderFormItem(e)}},{key:"getFormList",value:function(e){var n,r=this;return H()(n=U()(e||{})).call(n,(function(e){var n=x()(e,2),t=n[0],i=n[1];return r.generateTree({name:t,field:i})}))}},{key:"render",value:function(){var e=this.props,n=e.schema,r=w()(e,Qe),t=n||{},i=t.properties,o=w()(t,Xe),a=(null==r?void 0:r.onFormChange)||(null==o?void 0:o.onFormChange),l=(null==r?void 0:r.onMount)||(null==o?void 0:o.onMount),u=this.aopFormOnChange.addAfter(a),s=this.aopFormMount.addAfter(l);return W.a.createElement(pe,_()({},o,r,{onFormChange:u,onMount:s}),this.getFormList(i))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return!ze(e.schema,n.prevSchema)?Ze(Ze({},n),{},{prevSchema:e.schema}):null}}]),r}(W.a.Component);en.defaultProps={widgets:{},Fields:Ie};var nn=en;n.default=nn}]);