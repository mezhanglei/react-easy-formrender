module.exports=function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=30)}([function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/assertThisInitialized")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/typeof")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/concat")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/objectWithoutProperties")},function(e,r){e.exports=require("react-easy-formcore")},function(e,r){e.exports=require("react")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/map")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/extends")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/keys")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/map")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/reflect/construct")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/slicedToArray")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/entries")},function(e,r,n){"use strict";n.d(r,"a",(function(){return o}));var t=n(4),o={"Form.Item":t.Form.Item,"Form.List":t.Form.List,"List.Item":t.ListItem}},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/classCallCheck")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/createClass")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/for-each")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/getPrototypeOf")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-names")},function(e,r,n){},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/filter")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/defineProperty")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/inherits")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/from-entries")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/set")},function(e,r,n){"use strict";var t=n(10),o=n.n(t),i=n(16),a=n.n(i),l=n(23),s=n.n(l),u=n(17),c=n.n(u),p=n(18),d=n.n(p),f=n(19),h=n.n(f),m=n(24),v=n.n(m),b=n(3),y=n.n(b),g=n(7),j=n.n(g),F=n(1),x=n.n(F),P=n(11),q=n.n(P),O=n(14),w=n.n(O),C=n(15),V=n.n(C),k=n(0),M=n.n(k),I=n(25),L=n.n(I),A=n(26),E=n.n(A),S=n(20),T=n.n(S),_=n(9),W=n.n(_),z=n(12),B=n.n(z),R=n(6),D=n.n(R),$=n(8),U=n.n($),G=n(2),H=n.n(G),J=n(27),K=n.n(J),N=n(5),Q=n.n(N),X=n(4),Y=n(13),Z=n(21),ee=n.n(Z);function re(e,r){if("object"!=x()(e)||"object"!==x()(r))return e===r;var n=ee()(e),t=ee()(r);if(n.length!=t.length)return!1;for(var o=0;o<n.length;o++){var i=n[o],a=e[i],l=r[i];if("object"===x()(a)){if(!re(a,l))return!1}else if(a!==l)return!1}return!0}var ne=function(){function e(r){w()(this,e),this.originFun=void 0,this.beforeFun=void 0,this.afterFun=void 0,this.originFun=this.init(r)}return V()(e,[{key:"init",value:function(e){var r=this;return function(){for(var n,t,o,i,a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];var u=null===(n=r.beforeFun)||void 0===n?void 0:n.call.apply(n,H()(t=[r]).call(t,l));if("boolean"!=typeof u||u){var c=null==e?void 0:e.apply(void 0,l);return null===(o=r.afterFun)||void 0===o||o.call.apply(o,H()(i=[r]).call(i,l)),c}}}},{key:"addBefore",value:function(e){return"function"==typeof e&&(this.beforeFun=e),this.originFun}},{key:"addAfter",value:function(e){return"function"==typeof e&&(this.afterFun=e),this.originFun}}]),e}(),te=n(28),oe=n.n(te);function ie(e){return Object.prototype.toString.call(e)}function ae(e){return"[object Object]"==ie(e)}function le(e){return Array.isArray(e)||"string"==typeof e||e instanceof String?0===e.length:e instanceof W.a||e instanceof oe.a?0===e.size:"[object Object]"==={}.toString.call(e)?0===U()(e).length:null==e}n(31);function se(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout((function(){null==e||e.apply(void 0,o)}),r)}}var ue=["component","props"],ce=["children"],pe=["render"],de=["properties","component","props","render"],fe=["hidden","readOnly"],he=["properties"],me=["schema","watch"],ve=["properties"];function be(e,r){var n=U()(e);if(a.a){var t=a()(e);r&&(t=s()(t).call(t,(function(r){return c()(e,r).enumerable}))),n.push.apply(n,t)}return n}function ye(e){for(var r=1;r<arguments.length;r++){var n,t,o=null!=arguments[r]?arguments[r]:{};r%2?d()(n=be(Object(o),!0)).call(n,(function(r){v()(e,r,o[r])})):h.a?Object.defineProperties(e,h()(o)):d()(t=be(Object(o))).call(t,(function(r){Object.defineProperty(e,r,c()(o,r))}))}return e}function ge(e){var r=function(){if("undefined"==typeof Reflect||!o.a)return!1;if(o.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=T()(e);if(r){var i=T()(this).constructor;n=o()(t,arguments,i)}else n=t.apply(this,arguments);return E()(this,n)}}var je=function(e){L()(n,e);var r=ge(n);function n(e){var t;return w()(this,n),(t=r.call(this,e)).aopOnValuesChange=void 0,t.aopOnMount=void 0,t.aopOnVisible=void 0,t.state={fieldPropsMap:new W.a},t.getFormList=t.getFormList.bind(M()(t)),t.generateTree=t.generateTree.bind(M()(t)),t.generateChildren=t.generateChildren.bind(M()(t)),t.renderFormItem=t.renderFormItem.bind(M()(t)),t.renderListItem=t.renderListItem.bind(M()(t)),t.renderProperties=t.renderProperties.bind(M()(t)),t.onValuesChange=se(t.onValuesChange.bind(M()(t)),16.7),t.onVisible=se(t.onVisible.bind(M()(t)),16.7),t.onMount=t.onMount.bind(M()(t)),t.handleFieldProps=t.handleFieldProps.bind(M()(t)),t.calcExpression=t.calcExpression.bind(M()(t)),t.showCalcFieldProps=t.showCalcFieldProps.bind(M()(t)),t.handleWatch=t.handleWatch.bind(M()(t)),t.aopOnValuesChange=new ne(t.onValuesChange),t.aopOnMount=new ne(t.onMount),t.aopOnVisible=new ne(t.onVisible),t}return V()(n,[{key:"onMount",value:function(){this.handleFieldProps()}},{key:"onValuesChange",value:function(){this.handleFieldProps()}},{key:"onVisible",value:function(e){null!=e&&e.hidden&&this.handleWatch()}},{key:"componentDidUpdate",value:function(e,r){!re(this.props.schema,e.schema)&&this.handleFieldProps()}},{key:"handleWatch",value:function(){var e,r=this.props,n=r.store,t=r.watch;null===(e=B()(t||{}))||void 0===e||D()(e).call(e,(function(e){var r=q()(e,2),t=r[0],o=r[1];"function"==typeof o?null==n||n.subscribeValue(t,o):"object"===x()(o)&&("function"==typeof o.handler&&(null==n||n.subscribeValue(t,o.handler)),o.immediate&&o.handler(null==n?void 0:n.getFieldValue(t),null==n?void 0:n.getLastValue(t)))}))}},{key:"handleFieldProps",value:function(){var e,r=this,n=new W.a;!function e(t,o){for(var i in t){var a=t[i];if(ae(a))for(var l=U()(a),s=0;s<(null==l?void 0:l.length);s++){var u=l[s],c=a[u];if("properties"!==u){var p,d,f=H()(p="".concat(i,".")).call(p,u),h=o?H()(d="".concat(o,".")).call(d,f):f,m=r.calcExpression(c);n.set(h,m)}}else if(!le(a)){var v,b=o?H()(v="".concat(o,".")).call(v,i):i,y=r.calcExpression(a);n.set(b,y)}var g,j=null==a?void 0:a.properties;if("object"===x()(j))e(j,o?H()(g="".concat(o,".")).call(g,i):i)}}(null===(e=this.props.schema)||void 0===e?void 0:e.properties),this.setState({fieldPropsMap:n})}},{key:"showCalcFieldProps",value:function(e,r){var n,t,o=this.state.fieldPropsMap;null!=o&&o.size&&e&&(n=K()(null===(t=B()(e))||void 0===t?void 0:D()(t).call(t,(function(e){var n,t=q()(e,1)[0];return[t,o.get(H()(n="".concat(r,".")).call(n,t))]}))));return n}},{key:"calcExpression",value:function(e){if("string"==typeof e){var r,n=new RegExp("{{s*.*?s*}}","gi"),t=null==e||null===(r=e.match(n))||void 0===r?void 0:r[0];if(t){var o,i,a=null==t?void 0:t.replace(/\{\{|\}\}|\s*/g,"");return a=null===(i=a=null===(o=a)||void 0===o?void 0:o.replace(/\$form/g,"this?.props?.store?.getFieldValue()"))||void 0===i?void 0:i.replace(/\$schema/g,"this?.props?.schema"),new Function("return "+a).apply(this)}return e}return e}},{key:"generateChildren",value:function(e){var r=this,n=this.props.widgets;return e instanceof Array?null==e?void 0:D()(e).call(e,(function(e){var t=e.component,o=e.props,i=null==n?void 0:n[t];return Q.a.createElement(i,j()({},o,{children:r.generateChildren(null==o?void 0:o.children)}))})):e}},{key:"renderFormItem",value:function(e){var r=e||{},n=r.name,t=r.itemField,o=r.path,i=this.props,a=i.widgets,l=i.Fields,s=t.component,u=t.props,c=y()(t,ue),p=u||{},d=p.children,f=y()(p,ce),h=null==l?void 0:l["Form.Item"],m=s&&(null==a?void 0:a[s]),v=this.showCalcFieldProps(c,o);return Q.a.createElement(h,j()({},c,v,{key:n,name:n}),Q.a.createElement(m,f,this.generateChildren(d)))}},{key:"renderListItem",value:function(e){var r=e||{},n=r.name,t=r.itemField,o=r.path,i=this.props.Fields,a=null==i?void 0:i["List.Item"],l=t.render,s=y()(t,pe),u=this.showCalcFieldProps(t,o);return Q.a.createElement(a,j()({},s,u,{key:n}),l)}},{key:"renderProperties",value:function(e){var r,n,t=this,o=e||{},i=o.name,a=o.propertiesField,l=o.path,s=this.props.Fields,u=a.properties,c=(a.component,a.props,a.render,y()(a,de));n=u instanceof Array?s["Form.List"]:s["Form.Item"];var p=this.showCalcFieldProps(c,l);return Q.a.createElement(n,j()({},c,p,{key:i,name:i}),u instanceof Array?null==u?void 0:D()(u).call(u,(function(e,r){return t.generateTree({name:"".concat(r),field:e,path:l})})):null===(r=B()(u||{}))||void 0===r?void 0:D()(r).call(r,(function(e){var r=q()(e,2),n=r[0],o=r[1];return t.generateTree({name:n,field:o,path:l})})))}},{key:"generateTree",value:function(e){var r,n=e||{},t=n.name,o=n.field,i=n.path,a=(o.hidden,o.readOnly),l=y()(o,fe),s=l||{},u=s.properties,c=y()(s,he),p=i?H()(r="".concat(i,".")).call(r,t):t;if(!this.state.fieldPropsMap.get("".concat(p,".hidden")))return!0===a?this.renderListItem({name:t,itemField:c,path:p}):"object"===x()(u)?!le(u)&&this.renderProperties({name:t,propertiesField:l,path:p}):this.renderFormItem({name:t,itemField:c,path:p})}},{key:"getFormList",value:function(e){var r,n=this;return D()(r=B()(e||{})).call(r,(function(e){var r=q()(e,2),t=r[0],o=r[1];return n.generateTree({name:t,field:o})}))}},{key:"render",value:function(){var e=this.props,r=e.schema,n=(e.watch,y()(e,me)),t=r||{},o=t.properties,i=y()(t,ve),a=(null==n?void 0:n.onValuesChange)||(null==i?void 0:i.onValuesChange),l=(null==n?void 0:n.onMount)||(null==i?void 0:i.onMount),s=(null==n?void 0:n.onVisible)||(null==i?void 0:i.onVisible),u=this.aopOnValuesChange.addAfter(a),c=this.aopOnMount.addAfter(l),p=this.aopOnVisible.addAfter(s);return Q.a.createElement(X.Form,j()({},i,n,{onValuesChange:u,onMount:c,onVisible:p}),this.getFormList(o))}}],[{key:"getDerivedStateFromProps",value:function(e,r){return!re(e.schema,r.prevSchema)?ye(ye({},r),{},{prevSchema:e.schema}):null}}]),n}(Q.a.Component);je.defaultProps={widgets:{},Fields:Y.a};r.a=je},function(e,r,n){"use strict";n.r(r);var t=n(29),o=(n(22),n(13));n.d(r,"defaultFields",(function(){return o.a}));var i=n(4);for(var a in i)["default","defaultFields"].indexOf(a)<0&&function(e){n.d(r,e,(function(){return i[e]}))}(a);r.default=t.a},function(e,r){e.exports=require("react-easy-formcore/lib/css/main.css")}]);