module.exports=function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(t,i,function(r){return e[r]}.bind(null,i));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=30)}([function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/assertThisInitialized")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/typeof")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/concat")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/objectWithoutProperties")},function(e,r){e.exports=require("react-easy-formcore")},function(e,r){e.exports=require("react")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/map")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/map")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/reflect/construct")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/extends")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/slicedToArray")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/entries")},function(e,r,n){"use strict";n.d(r,"a",(function(){return i}));var t=n(4),i={"Form.Item":t.Form.Item,"Form.List":t.Form.List,"List.Item":t.ListItem}},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/keys")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/classCallCheck")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/createClass")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/for-each")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/getPrototypeOf")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-names")},function(e,r,n){},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/filter")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/defineProperty")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/inherits")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/from-entries")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/set")},function(e,r,n){"use strict";n.d(r,"a",(function(){return ve}));var t=n(8),i=n.n(t),o=n(13),a=n.n(o),s=n(16),l=n.n(s),u=n(23),c=n.n(u),p=n(17),f=n.n(p),d=n(18),h=n.n(d),m=n(19),v=n.n(m),b=n(24),y=n.n(b),g=n(3),j=n.n(g),F=n(9),x=n.n(F),P=n(1),q=n.n(P),C=n(10),k=n.n(C),w=n(14),O=n.n(w),I=n(15),L=n.n(I),V=n(0),S=n.n(V),T=n(25),A=n.n(T),E=n(26),M=n.n(E),W=n(20),_=n.n(W),z=n(7),B=n.n(z),D=n(11),R=n.n(D),U=n(6),$=n.n(U),G=n(2),H=n.n(G),J=n(27),K=n.n(J),N=n(5),Q=n.n(N),X=n(12),Y=n(21),Z=n.n(Y);function ee(e,r){if("object"!=q()(e)||"object"!==q()(r))return e===r;var n=Z()(e),t=Z()(r);if(n.length!=t.length)return!1;for(var i=0;i<n.length;i++){var o=n[i],a=e[o],s=r[o];if("object"===q()(a)){if(!ee(a,s))return!1}else if(a!==s)return!1}return!0}var re=function(){function e(r){O()(this,e),this.originFun=void 0,this.beforeFun=void 0,this.afterFun=void 0,this.originFun=this.init(r)}return L()(e,[{key:"init",value:function(e){var r=this;return function(){for(var n,t,i,o,a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=null===(n=r.beforeFun)||void 0===n?void 0:n.call.apply(n,H()(t=[r]).call(t,s));if("boolean"!=typeof u||u){var c=null==e?void 0:e.apply(void 0,s);return null===(i=r.afterFun)||void 0===i||i.call.apply(i,H()(o=[r]).call(o,s)),c}}}},{key:"addBefore",value:function(e){return"function"==typeof e&&(this.beforeFun=e),this.originFun}},{key:"addAfter",value:function(e){return"function"==typeof e&&(this.afterFun=e),this.originFun}}]),e}(),ne=n(28),te=n.n(ne);var ie=n(4),oe=(n(31),["component","props"]),ae=["children"],se=["render"],le=["properties","component","props","render"],ue=["hidden","readOnly"],ce=["properties"],pe=["schema","watch","onValuesChange","children"],fe=["properties"];function de(e,r){var n=a()(e);if(l.a){var t=l()(e);r&&(t=c()(t).call(t,(function(r){return f()(e,r).enumerable}))),n.push.apply(n,t)}return n}function he(e){for(var r=1;r<arguments.length;r++){var n,t,i=null!=arguments[r]?arguments[r]:{};r%2?h()(n=de(Object(i),!0)).call(n,(function(r){y()(e,r,i[r])})):v.a?Object.defineProperties(e,v()(i)):h()(t=de(Object(i))).call(t,(function(r){Object.defineProperty(e,r,f()(i,r))}))}return e}function me(e){var r=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=_()(e);if(r){var o=_()(this).constructor;n=i()(t,arguments,o)}else n=t.apply(this,arguments);return M()(this,n)}}var ve=function(e){A()(n,e);var r=me(n);function n(e){var t;return O()(this,n),(t=r.call(this,e)).aopOnValuesChange=void 0,t.state={fieldPropsMap:new B.a},t.getFormList=t.getFormList.bind(S()(t)),t.generateTree=t.generateTree.bind(S()(t)),t.generateChildren=t.generateChildren.bind(S()(t)),t.renderFormItem=t.renderFormItem.bind(S()(t)),t.renderListItem=t.renderListItem.bind(S()(t)),t.renderProperties=t.renderProperties.bind(S()(t)),t.onValuesChange=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout((function(){null==e||e.apply(void 0,i)}),r)}}(t.onValuesChange.bind(S()(t)),16.7),t.handleFieldProps=t.handleFieldProps.bind(S()(t)),t.calcExpression=t.calcExpression.bind(S()(t)),t.showCalcFieldProps=t.showCalcFieldProps.bind(S()(t)),t.initWatch=t.initWatch.bind(S()(t)),t.aopOnValuesChange=new re(t.onValuesChange),t}return L()(n,[{key:"componentDidMount",value:function(){this.handleFieldProps(),this.initWatch()}},{key:"componentWillUnmount",value:function(){var e=this.props.store;null==e||e.removeListenStoreValue()}},{key:"onValuesChange",value:function(){this.handleFieldProps()}},{key:"componentDidUpdate",value:function(e,r){!ee(this.props.schema,e.schema)&&this.handleFieldProps()}},{key:"initWatch",value:function(){var e,r=this.props,n=r.store,t=r.watch;null===(e=R()(t||{}))||void 0===e||$()(e).call(e,(function(e){var r=k()(e,2),t=r[0],i=r[1];"function"==typeof i?null==n||n.listenStoreValue(t,i):"object"===q()(i)&&("function"==typeof i.handler&&(null==n||n.listenStoreValue(t,i.handler)),i.immediate&&i.handler(null==n?void 0:n.getFieldValue(t),null==n?void 0:n.getLastValue(t)))}))}},{key:"handleFieldProps",value:function(){var e,r,n=this,t=new B.a,i=function e(r,i){for(var o in r){var a=r[o];if("properties"!==o){var s,l=i?H()(s="".concat(i,".")).call(s,o):o,u=n.calcExpression(a);t.set(l,u)}else if(a instanceof Array)for(var c=0;c<(null==a?void 0:a.length);c++){var p;e(a[c],H()(p="".concat(i,".")).call(p,c))}else for(var f in a){var d;e(a[f],H()(d="".concat(i,".")).call(d,f))}}},o=null===(e=this.props)||void 0===e||null===(r=e.schema)||void 0===r?void 0:r.properties;for(var a in o){i(o[a],a)}this.setState({fieldPropsMap:t})}},{key:"showCalcFieldProps",value:function(e,r){var n,t,i=this.state.fieldPropsMap;null!=i&&i.size&&e&&(n=K()(null===(t=R()(e))||void 0===t?void 0:$()(t).call(t,(function(e){var n,t=k()(e,1)[0];return[t,i.get(H()(n="".concat(r,".")).call(n,t))]}))));return n}},{key:"calcExpression",value:function(e){if("string"==typeof e){var r,n=new RegExp("{{s*.*?s*}}","gi"),t=null==e||null===(r=e.match(n))||void 0===r?void 0:r[0];if(t){var i,o=null==t?void 0:t.replace(/\{\{|\}\}|\s*/g,"");return o=null===(i=o)||void 0===i?void 0:i.replace(/\$form/g,"this.props.store && this.props.store.getFieldValue()"),new Function("return "+o).apply(this)}return e}return e}},{key:"generateChildren",value:function(e){var r=this,n=this.props.widgets;return e instanceof Array?null==e?void 0:$()(e).call(e,(function(e){var t=e.component,i=e.props,o=null==n?void 0:n[t];return Q.a.createElement(o,x()({},i,{children:r.generateChildren(null==i?void 0:i.children)}))})):e}},{key:"renderFormItem",value:function(e){var r=e||{},n=r.name,t=r.itemField,i=r.path,o=this.props,a=o.widgets,s=o.Fields,l=t.component,u=t.props,c=j()(t,oe),p=u||{},f=p.children,d=j()(p,ae),h=null==s?void 0:s["Form.Item"],m=l&&(null==a?void 0:a[l]),v=this.showCalcFieldProps(c,i);return Q.a.createElement(h,x()({},c,v,{key:n,name:n}),Q.a.createElement(m,d,this.generateChildren(f)))}},{key:"renderListItem",value:function(e){var r=e||{},n=r.name,t=r.itemField,i=r.path,o=this.props.Fields,a=null==o?void 0:o["List.Item"],s=t.render,l=j()(t,se),u=this.showCalcFieldProps(t,i);return Q.a.createElement(a,x()({},l,u,{key:n}),s)}},{key:"renderProperties",value:function(e){var r,n,t=this,i=e||{},o=i.name,a=i.propertiesField,s=i.path,l=this.props.Fields,u=a.properties,c=(a.component,a.props,a.render,j()(a,le));n=u instanceof Array?null==l?void 0:l["Form.List"]:null==l?void 0:l["Form.Item"];var p=this.showCalcFieldProps(c,s);return Q.a.createElement(n,x()({},c,p,{key:o,name:o}),u instanceof Array?null==u?void 0:$()(u).call(u,(function(e,r){return t.generateTree({name:"".concat(r),field:e,path:s})})):null===(r=R()(u||{}))||void 0===r?void 0:$()(r).call(r,(function(e){var r=k()(e,2),n=r[0],i=r[1];return t.generateTree({name:n,field:i,path:s})})))}},{key:"generateTree",value:function(e){var r,n,t=e||{},i=t.name,o=t.field,s=t.path,l=(o.hidden,o.readOnly),u=j()(o,ue),c=u||{},p=c.properties,f=j()(c,ce),d=s?H()(r="".concat(s,".")).call(r,i):i;if(!this.state.fieldPropsMap.get("".concat(d,".hidden")))return!0===l?this.renderListItem({name:i,itemField:f,path:d}):"object"===q()(p)?(n=p,!(Array.isArray(n)||"string"==typeof n||n instanceof String?0===n.length:n instanceof B.a||n instanceof te.a?0===n.size:"[object Object]"==={}.toString.call(n)?0===a()(n).length:null==n)&&this.renderProperties({name:i,propertiesField:u,path:d})):this.renderFormItem({name:i,itemField:f,path:d})}},{key:"getFormList",value:function(e,r){var n;return $()(n=R()(e||{})).call(n,(function(e){var n=k()(e,2),t=n[0],i=n[1];return r({name:t,field:i})}))}},{key:"render",value:function(){var e=this.props,r=e.schema,n=(e.watch,e.onValuesChange),t=e.children,i=j()(e,pe),o=r||{},a=o.properties,s=j()(o,fe),l=this.aopOnValuesChange.addAfter(n),u=he(he(he({},s),i),{},{onValuesChange:l});return Q.a.createElement(ie.Form,u,"function"==typeof t?t(a,this.generateTree):this.getFormList(a,this.generateTree))}}],[{key:"getDerivedStateFromProps",value:function(e,r){return!ee(e.schema,r.prevSchema)?he(he({},r),{},{prevSchema:e.schema}):null}}]),n}(Q.a.Component);ve.defaultProps={widgets:{},Fields:X.a}},function(e,r,n){"use strict";n.r(r);var t=n(29),i=(n(22),n(12));n.d(r,"defaultFields",(function(){return i.a}));var o=n(4);for(var a in o)["default","defaultFields"].indexOf(a)<0&&function(e){n.d(r,e,(function(){return o[e]}))}(a);r.default=t.a},function(e,r){e.exports=require("react-easy-formcore/lib/css/main.css")}]);